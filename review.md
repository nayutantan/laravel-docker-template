# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
Modelを介することでSQL文を組み立てることなくtodosテーブルを操作することができるようになっている。

### Todoモデルのallメソッドの返り値は何か
Illuminate\Database\Eloquent\Collectionクラスのインスタンス

### 配列の代わりにCollectionクラスを使用するメリットは
Collectionインスタンスは配列操作に特化したクラス

Collectionは便利メソッド付きの配列→コードが短く、読みやすく、安全になる。

配列だと自分で書かなければならない処理をCollection なら ワンメソッド でできる。

Null や undefined に強い（安全性UP）
使えるメソッドが圧倒的に多い

配列操作のロジックを Collection にすると、
・同じ処理を再現しやすい
・意図が明確なのでテストしやすい
・バグが減る

### view関数の第1・第2引数の指定と何をしているか
view関数は画面に表示したいbladeファイルを第一引数で指定し、第二引数に渡したいデータを連想配列の形で渡すことができる。view関数の第二引数の連想配列は、[blade内での変数名 => 代入したい値]を意味する。

### index.blade.phpの$todos・$todoに代入されているものは何か
? app/Http/Controllers/TodoController.phpの

...省略

    public function index()
    {
        $todo = new Todo();
        $todos = $todo->all();

        return view('todo.index', ['helloWorld' => 'hello World!']);
    }

...省略

## Todo作成機能

### Requestクラスのallメソッドは何をしているか
フォームから送信された値を個別ではなく一括で取得している。

### fillメソッドは何をしているか
Todoインスタンスの各プロパティに一括で代入している。

### $fillableは何のために設定しているか
便利な一括代入には実は脆弱性があり、対策をせずに使用すると悪意のあるユーザに攻撃されてしまう恐れがあるため。

### saveメソッドで実行しているSQLは何か
?


### redirect()->route()は何をしているか
ToDoが新規作成された後に、白い画面ではなく一覧画面を表示させたいので、一覧画面にリダイレクトする処理。

## その他

### テーブル構成をマイグレーションファイルで管理するメリット
・SQLを知らなくても、PHPコードでテーブル操作ができるため学習コストが不要
・マイグレーションファイルをGitで共有することで、開発者全員が同じテーブルを作成することができる

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
マイグレーションを実行するにはphp artisan migrateコマンドを実行する
マイグレーションを元に戻すにはphp artisan migrate:rollbackコマンドを実行する

### Seederクラスの役割は何か
初期データ投入 プロジェクト開始時に必要なデータを作る
テストデータ作成 動作確認しやすくする
環境統一 チームメンバー全員が同じデータで開発
自動化 migrate とセットで DB を一発構築

? [メリット]
SQLを直接書かずPHPコードで表現できるため可読性が高い(SQLを知らなくても、PHPコードでテーブル操作ができるため学習コストが不要)
シーダーファイルをgit管理することで、テストデータを開発者間で共有できる

### route関数の引数・返り値・使用するメリット
引数	1 ルート名 2 パラメータ 3 絶対URL
返り値 URL文字列（string）
メリット URL変更に強い、バグが減る、テストしやすい、パラメータの扱いが楽

### @extends・@section・@yieldの関係性とbladeを分割するメリット
・@extends('Bladeファイルのパス')を使用することで他のBladeファイルを継承することができる
・@section('任意の文字列') ~ @endsectionで囲った部分を継承したBladeファイルの@yield('任意の文字列')の箇所に挿入される

@extends：親テンプレートを継承する
@section：子側で内容を定義する（親の @yield に入れる内容）
@yield：親側で子の内容が入る場所

メリット：イアウトを共通化できる、コード整理、再利用できる（コンポーネント化）、チーム開発で安全、ページ追加が高速

### @csrfは何のための記述か
フォームを安全に送信するためのセキュリティ対策です。
LaravelではCSRF（クロスサイトリクエストフォージェリ）攻撃の防止のためにすべてのPOST・PUT・PATCH・DELETEリクエストにCSRFトークンが必須になる。

### {{ }}とは何の省略系か
{{ echo }} の省略系。Bladeの安全な（HTML エスケープ付き）echo表記を短く書いた記法。
{!! !!}はエスケープしない echo。
